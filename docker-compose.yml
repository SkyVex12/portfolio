services:
  api:
    build:
      context: ./apps/resume-api
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
    ports:
      - "8000:8000"

  web:
    build:
      context: ./apps/web
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - RESUME_BUILDER_BACKEND_URL=http://api:8000
      - NEXT_PUBLIC_BASE_URL=${NEXT_PUBLIC_BASE_URL:-http://localhost:3000}
      - OPENAI_MODEL=${OPENAI_MODEL:-gpt-4.1}
      - STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY:-}
      - STRIPE_PRICE_ID=${STRIPE_PRICE_ID:-}
    ports:
      - "3000:3000"
    depends_on:
      - api
